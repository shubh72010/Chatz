<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Chat App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Chat App</h2>
            <div class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</div>
        </div>
        
        <div class="sidebar-tabs">
            <div class="sidebar-tab active" data-tab="chats">Chats</div>
            <div class="sidebar-tab" data-tab="friends">Friends</div>
            <div class="sidebar-tab" data-tab="groups">Groups</div>
        </div>
        
        <div class="search-bar">
            <input type="text" placeholder="Search..." id="searchInput">
        </div>
        
        <div class="sidebar-content">
            <!-- Chats Tab -->
            <div class="sidebar-tab-content active" data-tab-content="chats" id="chatsTab"></div>
            
            <!-- Friends Tab -->
            <div class="sidebar-tab-content" data-tab-content="friends" id="friendsTab"></div>
            
            <!-- Groups Tab -->
            <div class="sidebar-tab-content" data-tab-content="groups" id="groupsTab"></div>
        </div>
        
        <div class="sidebar-footer">
            <button class="btn btn-primary" id="newGroupBtn">New Group</button>
        </div>
    </div>
    
    <!-- Chat Area -->
    <div class="chat-area">
        <div class="chat-header" id="chatHeader">
            <div class="chat-header-avatar">
                <img src="https://via.placeholder.com/40" alt="User" id="chatAvatar">
            </div>
            <div class="chat-header-info">
                <h3 id="chatTitle">Select a chat</h3>
                <p id="chatStatus"></p>
            </div>
            <div class="chat-header-actions">
                <div class="chat-header-action" id="profileBtn">üë§</div>
                <div class="chat-header-action" id="groupInfoBtn">‚ÑπÔ∏è</div>
            </div>
        </div>
        
        <div class="messages-container" id="messagesContainer">
            <div class="empty-state">
                <p>Select a chat to start messaging</p>
            </div>
        </div>
        
        <div class="chat-input">
            <input type="text" placeholder="Type a message..." id="messageInput">
            <button id="sendMessageBtn">‚û§</button>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>My Profile</h3>
                <span class="modal-close" id="closeProfileModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-avatar">
                    <img src="https://via.placeholder.com/100" alt="Profile" id="profileAvatar">
                    <div class="profile-avatar-edit">‚úèÔ∏è</div>
                </div>
                <div class="profile-name">
                    <h3 id="profileName">Your Name</h3>
                    <p id="profileUsername">@username</p>
                </div>
                <div class="profile-details">
                    <div class="profile-detail">
                        <div class="profile-detail-label">Email</div>
                        <div class="profile-detail-value" id="profileEmail">user@example.com</div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Status</div>
                        <div class="profile-detail-value" id="profileStatus">Online</div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Member Since</div>
                        <div class="profile-detail-value" id="profileMemberSince">January 2023</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                <button class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Group Info Modal -->
    <div class="modal" id="groupInfoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Group Info</h3>
                <span class="modal-close" id="closeGroupInfoModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-avatar">
                    <img src="https://via.placeholder.com/100" alt="Group" id="groupInfoAvatar">
                </div>
                <div class="profile-name">
                    <h3 id="groupInfoName">Group Name</h3>
                    <p id="groupInfoMembers">0 members</p>
                </div>
                <div class="profile-details">
                    <div class="profile-detail">
                        <div class="profile-detail-label">Created</div>
                        <div class="profile-detail-value" id="groupInfoCreated">March 15, 2023</div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Admin</div>
                        <div class="profile-detail-value" id="groupInfoAdmin">You</div>
                    </div>
                </div>
                <h4>Members</h4>
                <div class="group-members" id="groupInfoMembersList"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="leaveGroupBtn">Leave Group</button>
                <button class="btn btn-primary" id="addMembersBtn">Add Members</button>
            </div>
        </div>
    </div>
    
    <!-- New Group Modal -->
    <div class="modal" id="newGroupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Group</h3>
                <span class="modal-close" id="closeNewGroupModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-avatar">
                    <img src="https://via.placeholder.com/100" alt="Group" id="groupAvatarPreview">
                    <div class="profile-avatar-edit">‚úèÔ∏è</div>
                </div>
                <div class="form-group">
                    <label for="groupName">Group Name</label>
                    <input type="text" id="groupName" class="form-control" placeholder="Enter group name">
                </div>
                <h4>Select Members</h4>
                <div class="group-members" id="groupMemberSelection"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelGroupBtn">Cancel</button>
                <button class="btn btn-primary" id="createGroupBtn">Create Group</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="firebaseHelpers.js"></script>
    <script src="chatLogic.js"></script>
</body>
</html>